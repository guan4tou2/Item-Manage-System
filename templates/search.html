{%extends 'template.html' %} {%block title%}æœå°‹ç‰©å“ - ç‰©å“ç®¡ç†ç³»çµ±{%endblock%}
{%block user%}{{User.User}}{%endblock%} {%block contain%}
<div class="container-fluid">
  <div class="row">
    <div class="col-12">
      <h1 class="display-5 text-center mb-4">ğŸ” æœå°‹ç‰©å“</h1>
      <p class="lead text-center mb-5">å¿«é€Ÿæ‰¾åˆ°æ‚¨éœ€è¦çš„ç‰©å“</p>
    </div>
  </div>

  <!-- æœå°‹è¡¨å–® -->
  <div class="row mb-4">
    <div class="col-md-8 mx-auto">
      <form action="{{ url_for('search') }}" method="GET" class="d-flex">
        <input
          type="text"
          name="q"
          class="form-control me-2"
          placeholder="æœå°‹ç‰©å“åç¨±..."
          value="{{ query }}"
        />
        <input
          type="text"
          name="place"
          class="form-control me-2"
          placeholder="æœå°‹æ”¾ç½®åœ°é»..."
          value="{{ place }}"
        />
        <button type="submit" class="btn btn-primary">ğŸ” æœå°‹</button>
        <a href="{{ url_for('home') }}" class="btn btn-secondary ms-2"
          >ğŸ”™ è¿”å›é¦–é </a
        >
      </form>
    </div>
  </div>

  <!-- æœå°‹çµæœ -->
  {%if query or place%}
  <div class="row mb-4">
    <div class="col-12">
      <h4>æœå°‹çµæœ ({{ items|length }} é …)</h4>
      {%if query%}
      <p class="text-muted">æœå°‹é—œéµå­—: "{{ query }}"</p>
      {%endif%} {%if place%}
      <p class="text-muted">æœå°‹åœ°é»: "{{ place }}"</p>
      {%endif%}
    </div>
  </div>
  {%endif%}
</div>
{%endblock%} {%block card%} {%if items%}
<div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4">
  {%for item in items%}
  <div class="col">
    <div class="card h-100 shadow-sm">
      {%if item.ItemPic%}
      <img
        src="{{ url_for('uploaded_file', filename=item.ItemPic) }}"
        class="card-img-top"
        alt="{{ item.ItemName }}"
        style="height: 200px; object-fit: cover"
      />
      {%else%}
      <div
        class="card-img-top bg-light d-flex align-items-center justify-content-center"
        style="height: 200px"
      >
        <i class="fas fa-image fa-3x text-muted"></i>
      </div>
      {%endif%}
      <div class="card-body">
        <h5 class="card-title">{{item.ItemName}}</h5>
        <p class="card-text text-muted">ID: {{item.ItemID}}</p>
        {%if item.ItemStorePlace%}
        <p class="card-text">
          <strong>ğŸ“ æ”¾ç½®åœ°é»:</strong> {{item.ItemStorePlace}}
        </p>
        {%endif%} {%if item.ItemType%}
        <p class="card-text"><strong>ğŸ“‚ é¡å‹:</strong> {{item.ItemType}}</p>
        {%endif%} {%if item.ItemOwner%}
        <p class="card-text"><strong>ğŸ‘¤ æ“æœ‰è€…:</strong> {{item.ItemOwner}}</p>
        {%endif%} {%if item.ItemGetDate%}
        <p class="card-text">
          <strong>ğŸ“… å–å¾—æ—¥æœŸ:</strong> {{item.ItemGetDate}}
        </p>
        {%endif%} {%if item.ItemDesc%}
        <p class="card-text">{{item.ItemDesc}}</p>
        {%endif%}
      </div>
      <div class="card-footer">
        <div class="d-flex justify-content-between">
          <a
            href="{{ url_for('manageitem') }}?id={{item.ItemID}}"
            class="btn btn-primary btn-sm"
            >âœï¸ ç·¨è¼¯</a
          >
          <a
            href="{{ url_for('search') }}?q={{item.ItemName}}"
            class="btn btn-info btn-sm"
            >ğŸ” æœå°‹ç›¸ä¼¼</a
          >
        </div>
      </div>
    </div>
  </div>
  {%endfor%}
</div>
{%elif query or place%}
<div class="text-center py-5">
  <i class="fas fa-search fa-5x text-muted mb-3"></i>
  <h3 class="text-muted">æ²’æœ‰æ‰¾åˆ°ç›¸é—œç‰©å“</h3>
  <p class="text-muted">è«‹å˜—è©¦å…¶ä»–é—œéµå­—æˆ–åœ°é»</p>
  <a href="{{ url_for('additem') }}" class="btn btn-primary btn-lg"
    >â• æ–°å¢ç‰©å“</a
  >
</div>
{%else%}
<div class="text-center py-5">
  <i class="fas fa-search fa-5x text-muted mb-3"></i>
  <h3 class="text-muted">é–‹å§‹æœå°‹æ‚¨çš„ç‰©å“</h3>
  <p class="text-muted">åœ¨ä¸Šæ–¹è¼¸å…¥ç‰©å“åç¨±æˆ–æ”¾ç½®åœ°é»é€²è¡Œæœå°‹</p>
</div>
{%endif%} {%endblock%} {%block page%} {%if items|length > 8%}
<nav aria-label="Page navigation example">
  <ul class="pagination justify-content-center">
    <li class="page-item">
      <a class="page-link" href="#" aria-label="Previous">
        <span aria-hidden="true">&laquo;</span>
      </a>
    </li>
    <li class="page-item"><a class="page-link" href="#">1</a></li>
    <li class="page-item"><a class="page-link" href="#">2</a></li>
    <li class="page-item"><a class="page-link" href="#">3</a></li>
    <li class="page-item">
      <a class="page-link" href="#" aria-label="Next">
        <span aria-hidden="true">&raquo;</span>
      </a>
    </li>
  </ul>
</nav>
{%endif%} {%endblock%}
