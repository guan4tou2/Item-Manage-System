{%extends 'template.html' %}
{%block title%}ç·¨è¼¯ç‰©å“ - ç‰©å“ç®¡ç†ç³»çµ±{%endblock%}
{%block user%}{{User.User}}{%endblock%}

{%block contain%}
<div class="container">
  <div class="row">
    <div class="col-12">
      <h1 class="display-5 text-center mb-4">âœï¸ ç·¨è¼¯ç‰©å“</h1>
      <p class="lead text-center mb-5">ä¿®æ”¹ç‰©å“è³‡è¨Š</p>
    </div>
  </div>
</div>
{%endblock%}

{%block body%}
<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card shadow">
        <div class="card-body">
          <form
            class="row g-3"
            action="{{ url_for('items.edititem', item_id=item.ItemID) }}"
            method="post"
            enctype="multipart/form-data"
          >
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
            
            <!-- ç‰©å“åç¨± -->
            <div class="form-floating col-md-6">
              <input
                type="text"
                class="form-control"
                id="ItemName"
                name="ItemName"
                placeholder="ç‰©å“åç¨±"
                value="{{ item.ItemName }}"
                required
              />
              <label for="ItemName" class="form-label">ğŸ“ ç‰©å“åç¨±</label>
            </div>

            <!-- ç‰©å“ID (å”¯è®€) -->
            <div class="form-floating col-md-6">
              <input
                type="text"
                class="form-control"
                id="ItemID"
                name="ItemID"
                placeholder="ç‰©å“ID"
                value="{{ item.ItemID }}"
                readonly
              />
              <label for="ItemID" class="form-label">ğŸ·ï¸ ç‰©å“ID (ä¸å¯ä¿®æ”¹)</label>
            </div>

            <!-- ç›®å‰ç…§ç‰‡ -->
            {%if item.ItemPic%}
            <div class="col-12">
              <label class="form-label">ğŸ“¸ ç›®å‰ç…§ç‰‡</label>
              <div>
                <img
                  src="{{ url_for('items.uploaded_file', filename=item.ItemPic) }}"
                  alt="{{ item.ItemName }}"
                  class="img-thumbnail"
                  style="max-height: 200px"
                />
              </div>
                    </div>
            {%endif%}

            <!-- ç…§ç‰‡ä¸Šå‚³ -->
            <div class="col-md-6">
              <label for="ItemPic" class="form-label">ğŸ“¸ æ›´æ›ç…§ç‰‡</label>
              <input
                class="form-control form-control-lg"
                type="file"
                id="ItemPic"
                name="ItemPic"
                accept="image/*"
              />
              <div class="form-text">ç•™ç©ºå‰‡ä¿ç•™åŸæœ‰ç…§ç‰‡</div>
                    </div>

            <!-- æ”¾ç½®åœ°é» -->
            <div class="form-floating col-md-6">
              <input
                type="text"
                class="form-control"
                id="ItemStorePlace"
                name="ItemStorePlace"
                placeholder="æ”¾ç½®åœ°é»"
                value="{{ item.ItemStorePlace }}"
                required
              />
              <label for="ItemStorePlace" class="form-label">ğŸ“ æ”¾ç½®åœ°é»</label>
                    </div>

            <!-- æ¨“å±¤ / æˆ¿é–“ / å€åŸŸ -->
            <div class="form-floating col-md-4">
              <select id="ItemFloor" class="form-select" name="ItemFloor">
                <option value="">é¸æ“‡æ¨“å±¤</option>
                {% for f in floors %}
                <option value="{{f}}" {% if item.ItemFloor == f %}selected{% endif %}>{{f}}</option>
                {% endfor %}
              </select>
              <label for="ItemFloor" class="form-label">ğŸ¢ æ¨“å±¤</label>
                    </div>
            <div class="form-floating col-md-4">
              <select id="ItemRoom" class="form-select" name="ItemRoom">
                <option value="">é¸æ“‡æˆ¿é–“</option>
                {% for r in rooms %}
                <option value="{{r}}" {% if item.ItemRoom == r %}selected{% endif %}>{{r}}</option>
                {% endfor %}
              </select>
              <label for="ItemRoom" class="form-label">ğŸšª æˆ¿é–“</label>
                    </div>
            <div class="form-floating col-md-4">
              <select id="ItemZone" class="form-select" name="ItemZone">
                <option value="">é¸æ“‡å€åŸŸ</option>
                {% for z in zones %}
                <option value="{{z}}" {% if item.ItemZone == z %}selected{% endif %}>{{z}}</option>
                {% endfor %}
              </select>
              <label for="ItemZone" class="form-label">ğŸ—„ å€åŸŸ/æ«ƒä½</label>
                    </div>

            <!-- ç‰©å“é¡å‹ -->
            <div class="form-floating col-md-6">
              <select
                id="ItemType"
                class="form-select"
                name="ItemType"
                required
              >
                <option value="" disabled hidden>è«‹é¸æ“‡é¡å‹</option>
                            {%for type in itemtype%}
                <option value="{{type.name}}" {% if item.ItemType == type.name %}selected{% endif %}>{{type.name}}</option>
                            {%endfor%}
                        </select>
              <label for="ItemType" class="form-label">ğŸ“‚ ç‰©å“é¡å‹</label>
                    </div>

            <!-- ç‰©å“æ“æœ‰è€… -->
            <div class="form-floating col-md-6">
              <input
                type="text"
                class="form-control"
                id="ItemOwner"
                name="ItemOwner"
                placeholder="æ“æœ‰è€…"
                value="{{ item.ItemOwner }}"
                required
              />
              <label for="ItemOwner" class="form-label">ğŸ‘¤ ç‰©å“æ“æœ‰è€…</label>
                    </div>

            <!-- å–å¾—æ—¥æœŸ -->
            <div class="form-floating col-md-6">
              <input
                type="date"
                class="form-control"
                id="ItemGetDate"
                name="ItemGetDate"
                value="{{ item.ItemGetDate }}"
                required
              />
              <label for="ItemGetDate" class="form-label">ğŸ“… å–å¾—æ—¥æœŸ</label>
            </div>

            <!-- ç‰©å“æè¿° -->
            <div class="form-floating col-12">
              <textarea
                class="form-control"
                id="ItemDesc"
                name="ItemDesc"
                style="height: 100px"
                placeholder="ç‰©å“æè¿°"
              >{{ item.ItemDesc or '' }}</textarea>
              <label for="ItemDesc" class="form-label">ğŸ“ ç‰©å“æè¿°</label>
        </div>

            <!-- ä¿å›ºèˆ‡ä½¿ç”¨æœŸé™ -->
            <div class="form-floating col-md-6">
              <input
                type="date"
                class="form-control"
                id="WarrantyExpiry"
                name="WarrantyExpiry"
                value="{{ item.WarrantyExpiry or '' }}"
                placeholder="ä¿å›ºæˆªæ­¢"
              />
              <label for="WarrantyExpiry" class="form-label">ğŸ›¡ ä¿å›ºæˆªæ­¢</label>
    </div>
            <div class="form-floating col-md-6">
              <input
                type="date"
                class="form-control"
                id="UsageExpiry"
                name="UsageExpiry"
                value="{{ item.UsageExpiry or '' }}"
                placeholder="ä½¿ç”¨æœŸé™"
              />
              <label for="UsageExpiry" class="form-label">âŒ› ä½¿ç”¨æœŸé™</label>
</div>

            <!-- æäº¤æŒ‰éˆ• -->
            <div class="col-12 text-center">
              <button type="submit" class="btn btn-primary btn-lg">
                ğŸ’¾ å„²å­˜è®Šæ›´
              </button>
              <a
                href="{{ url_for('items.home') }}"
                class="btn btn-secondary btn-lg ms-2"
              >ğŸ”™ è¿”å›é¦–é </a>
            </div>
          </form>
          
          <!-- åˆªé™¤æŒ‰éˆ• -->
          <div class="mt-4 pt-4 border-top text-center">
            <form action="{{ url_for('items.deleteitem', item_id=item.ItemID) }}" method="post" 
                  onsubmit="return confirm('ç¢ºå®šè¦åˆªé™¤é€™å€‹ç‰©å“å—ï¼Ÿæ­¤æ“ä½œç„¡æ³•å¾©åŸï¼');">
              <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
              <button type="submit" class="btn btn-danger">
                ğŸ—‘ï¸ åˆªé™¤ç‰©å“
              </button>
            </form>
          </div>
            </div>
        </div>
    </div>
  </div>
</div>
{%endblock%}
